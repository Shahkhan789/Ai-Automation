<!DOCTYPE html>
<html>
<head>
    <title>Video Inspector</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        #results { margin-top: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Video Inspector</h1>
    <p>Analyze public video links (educational purpose only)</p>

    <input type="text" id="videoUrl" placeholder="Paste YouTube/TikTok URL" style="width: 100%; padding: 8px;">
    <button onclick="analyzeVideo()">Analyze</button>

    <div id="results" class="hidden">
        <h3>Video Information</h3>
        <div id="output"></div>
    </div>

    <script>
        async function analyzeVideo() {
            const url = document.getElementById('videoUrl').value;
            const output = document.getElementById('output');
            const results = document.getElementById('results');

            if (!url) {
                output.innerHTML = '<p style="color:red">Please enter a URL</p>';
                results.classList.remove('hidden');
                return;
            }

            const platform = detectPlatform(url);
            output.innerHTML = `<p><strong>URL:</strong> ${url}</p><p><strong>Platform:</strong> ${platform}</p>`;
            results.classList.remove('hidden');

            if (platform === 'YouTube') {
                const videoId = getYouTubeVideoId(url);
                if (videoId) {
                    const videoData = await fetchYouTubeData(videoId);
                    if (videoData && videoData.items && videoData.items.length > 0) {
                        const snippet = videoData.items[0].snippet;
                        output.innerHTML += `
                            <p><strong>Title:</strong> ${snippet.title}</p>
                            <p><strong>Description:</strong> ${snippet.description}</p>
                            <img src="${snippet.thumbnails.default.url}" alt="Thumbnail">
                        `;
                    } else {
                        output.innerHTML += '<p style="color:red">Could not fetch video data.</p>';
                    }
                } else {
                    output.innerHTML += '<p style="color:red">Invalid YouTube URL.</p>';
                }
            } else if (platform === 'TikTok') {
                const videoUrl = await fetchTikTokVideo(url);
                if (videoUrl) {
                    output.innerHTML += `<p><a href="${videoUrl}" download>Download Video</a></p>`;
                } else {
                    output.innerHTML += '<p style="color:red">Could not fetch video data.</p>';
                }
            }
        }

        function detectPlatform(url) {
            if (url.includes('youtube.com') || url.includes('youtu.be')) return 'YouTube';
            if (url.includes('tiktok.com')) return 'TikTok';
            if (url.includes('instagram.com')) return 'Instagram';
            return 'Unknown';
        }

        function getYouTubeVideoId(url) {
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        async function fetchYouTubeData(videoId) {
            const API_KEY = 'AIzaSyBi8wFEvij58G3-TgZNv4YrjJg9kE64mE0';
            const response = await fetch(
                `https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${videoId}&key=${API_KEY}`
            );
            return await response.json();
        }

        async function fetchTikTokVideo(url) {
            const response = await fetch(`tiktok_downloader.php?url=${encodeURIComponent(url)}`);
            const videoUrl = await response.text();
            return videoUrl;
        }
    </script>
</body>
</html>
